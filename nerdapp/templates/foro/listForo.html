{% extends "nerdapp/base.html" %} {% block contenido %}

<div style="
	background-color: #6264eb21;
	border: 1px solid #ddd;
	margin-bottom: 20px;
	border-radius: 5px; 
	position: relative;
">
	<div class="row" style="padding: 2%; ">
		<div class="col">
			{% if user.is_authenticated %}
			<button type="button" class="btn btn-secondary" style=" text-align: start;padding: 2% 10%; ">
				<a href="{% url 'agregarForo' %}" style="text-decoration: none; color: white;">Crear Tema</a>
			</button>
			{% endif %}
		</div>
		<div class="col-6">
		</div>
		<div class="col">
			<h5 class="card-title" style="text-align: end;padding: 2% 10%;">Mis
				publicaciones</h5>
		</div>
	</div>
</div>
<h2 class="text-subtitulo" style="text-align: left">Foro p√∫blico</h2>
<div class="row"></div>
<div class="row">

	{% for p in publicaciones %}
	<div class="col" style="
				background-color: #6264eb21;
				border: 1px solid #ddd;
				margin-bottom: 20px;
	border-radius: 5px; 
			">
		<div class="row" style="text-align: start">
			<small class="col"><small>Autor Foro <i>{{ p.usuario_id_usuario.nombre_usuario}}</i></small></small>
			<div class="col" style="text-align: end; ">
				<small><small><i>{{ p.fecha_publicacion}}</i></small></small>
			</div>
		</div>

		<div style="text-align: start">
			<div class="subasta-title">{{ p.titulo_publicacion}}</div>

			<div class="col" style="background-color: #6264eb21;
				border: 1px solid #ddd;border-radius: 5px; padding: 2%; ">
				{{ p.descripcion_publicacion}}
				<br><br>

				<div style="text-align: start; overflow-y:scroll;
        overflow-x:hidden; height:200px">

					<small><small><i>Responder</i></small></small>
					<form method="post" enctype="multipart/form-data">
						{% load crispy_forms_tags %} {% csrf_token %}
						<div class="row">
							<div class="col-11">
								<input class="form-control me-2" type="text" style="margin: 1%" id="comentario"
									name="comentario" required />
							</div>
							<div class="col" style=" text-align: start; margin: auto;">
								<button type="submit"><i class="i bi-send"
										style="color: #545f71; margin: 1%;"></i></button>
							</div>
							<input type="hidden" id="usuario_id_usuario" name="usuario_id_usuario"
								value="{{ user.id }}" />
							<input type="hidden" id="estado_comentario" name="estado_comentario" value="activo" />
							<input type="hidden" id="publicacion_id_publicacion" name="publicacion_id_publicacion"
								value="{{p.id_publicacion}}" />
						</div>
					</form>
					<small><small><i>Respuestas de Usuarios</i></small></small>
					{% for c in comentarios %}
					{% if c.publicacion_id_publicacion.id_publicacion == p.id_publicacion %}

					<div class="row" style="background-color: #6264eb21;
											border: 1px solid #ddd;border-radius: 5px; padding: 2%;
											width: 95%; margin-bottom: 1%;">
						<div class=" col-2" style="background-color: #6264eb21; padding: 1%; text-align: center
						; border-radius: 20px;">
							{{c.usuario_id_usuario.nombre_usuario}}</div>
						<div class=" col" style="border-left: 1px solid #6264eb21; margin: 1%;">{{ c.comentario }}
						</div>
						<div class=" col-1" style="border-left: 1px solid #6264eb21; margin: 1%;">
							<small><small>{{c.fecha_comentario}}</small></small>
						</div>
					</div>
					{% endif %}
					{% endfor %}
				</div>
			</div>

		</div>


	</div>

	<hr />
	{% endfor %}
</div>
{% endblock contenido %}